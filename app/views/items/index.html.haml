- if flash[:error]
  .message.error= flash[:error]
- if flash[:message]
  .message= flash[:message]

%h1 Listing items

%table{ 'data-sort' => params[:sort], 'data-direction' => params[:direction] }
  %tr
    - ['Title', 'Artist', 'Year', 'Label', 'Format', 'Condition', 'Price Paid'].each do |field|
      %th
        %a{ 'data-sort' => field.parameterize('_'), :class => ('current' if params[:sort] == field.parameterize('_')) }
          = field
          - if params[:sort] == field.parameterize('_')
            = params[:direction] == 'ASC' ? "\u2191" : "\u2193"
    %th
      %a{ 'data-sort' => 'created_at', :class => ('current' if params[:sort] == 'created_at') }
        Added On
        - if params[:sort] == 'created_at' 
          = params[:direction] == 'ASC' ? "\u2191" : "\u2193"
    %th

  - @items.each do |item|
    %tr
      %td= item.title
      %td= item.artist
      %td= item.year
      %td= item.label
      %td= item.format
      %td= item.condition
      %td= item.price_paid
      %td= item.created_at.strftime('%m.%d.%y')
      %td
        = link_to 'e', edit_item_path(item)
        \/
        = link_to 'd', item, :method => :delete, :data => { :confirm => 'Are you sure you want to delete this item?' }

%br

= link_to 'New Item', new_item_path
%form{ :action => '/items/import', :method => 'post', :enctype => 'multipart/form-data'}
  %input{ :type => 'file', :name => 'file' }
  %input{ :type => 'submit', :value => 'Import' }
